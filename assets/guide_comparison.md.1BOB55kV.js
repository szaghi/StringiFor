import{_ as t,o as i,c as a,a2 as e}from"./chunks/framework.5q9EraSB.js";const c=JSON.parse('{"title":"Comparison to Other Approaches","description":"","frontmatter":{},"headers":[],"relativePath":"guide/comparison.md","filePath":"guide/comparison.md"}'),n={name:"guide/comparison.md"};function l(r,s,h,d,p,o){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="comparison-to-other-approaches" tabindex="-1">Comparison to Other Approaches <a class="header-anchor" href="#comparison-to-other-approaches" aria-label="Permalink to &quot;Comparison to Other Approaches&quot;">​</a></h1><p>The lack of built-in string manipulation in Fortran has led to several different solutions over the years. This page compares StringiFor to the three main alternatives identified by Clive Page <a href="#ref1">[1]</a>.</p><h2 id="the-four-approaches" tabindex="-1">The Four Approaches <a class="header-anchor" href="#the-four-approaches" aria-label="Permalink to &quot;The Four Approaches&quot;">​</a></h2><h3 id="_1-standard-character-type" tabindex="-1">1. Standard <code>character</code> type <a class="header-anchor" href="#_1-standard-character-type" aria-label="Permalink to &quot;1. Standard \`character\` type&quot;">​</a></h3><p>Fixed-length at compile time. Simple and universally supported, but severely limited:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">character</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">len</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;abcdefgh&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   ! silently truncated to &#39;abc&#39;</span></span></code></pre></div><h3 id="_2-deferred-length-allocatable-character" tabindex="-1">2. Deferred-length allocatable character <a class="header-anchor" href="#_2-deferred-length-allocatable-character" aria-label="Permalink to &quot;2. Deferred-length allocatable character&quot;">​</a></h3><p>Introduced in Fortran 2003. Removes the fixed-length constraint but array elements must still all have the same length:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">character</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">len</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocatable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">character</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">len</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocatable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr(:)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello &#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;World&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    ! no trim() needed, length adapts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(character(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">len</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) :: arr(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! all 10 elements are len=99</span></span></code></pre></div><h3 id="_3-aniso-varying-string-ian-harvey-s-iso-implementation" tabindex="-1">3. <code>aniso_varying_string</code> (Ian Harvey&#39;s ISO implementation) <a class="header-anchor" href="#_3-aniso-varying-string-ian-harvey-s-iso-implementation" aria-label="Permalink to &quot;3. \`aniso_varying_string\` (Ian Harvey&#39;s ISO implementation)&quot;">​</a></h3><p>A derived type wrapping a deferred-length allocatable character, implementing ISO/IEC 1539-2:2000. Solves the array-element problem but has I/O and slicing limitations:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">varying_string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocatable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr(:)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! elements can have different lengths</span></span></code></pre></div><h3 id="_4-stringifor" tabindex="-1">4. StringiFor <a class="header-anchor" href="#_4-stringifor" aria-label="Permalink to &quot;4. StringiFor&quot;">​</a></h3><p>Shares the same philosophy as <code>aniso_varying_string</code> — a derived type wrapping a single <code>character(kind=CK, len=:), allocatable</code> member — but adds an extensive OOP API modelled after Python&#39;s string methods.</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocatable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr(:)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! elements can have different lengths</span></span></code></pre></div><h2 id="issue-by-issue-comparison" tabindex="-1">Issue-by-Issue Comparison <a class="header-anchor" href="#issue-by-issue-comparison" aria-label="Permalink to &quot;Issue-by-Issue Comparison&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Issue</th><th style="text-align:center;"><code>character</code></th><th style="text-align:center;">Deferred-length</th><th style="text-align:center;"><code>aniso_varying_string</code></th><th style="text-align:center;">StringiFor</th></tr></thead><tbody><tr><td>Fixed length at compile time</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td>Silent truncation on assignment</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td><code>trim()</code>-cluttered code</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td>Significant trailing spaces</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td>Single definition syntax</td><td style="text-align:center;">✗</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td>Array allocation (variable lengths)</td><td style="text-align:center;">✗</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td>Array initialization</td><td style="text-align:center;">✗</td><td style="text-align:center;">✗</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td></tr><tr><td>I/O support</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">~</td><td style="text-align:center;">~</td></tr><tr><td>Substring (slice) notation</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">~</td><td style="text-align:center;">~</td></tr><tr><td>Fortran intrinsics as-is</td><td style="text-align:center;">✓</td><td style="text-align:center;">✓</td><td style="text-align:center;">~</td><td style="text-align:center;">~</td></tr></tbody></table><p><strong>✓</strong> = good support · <strong>~</strong> = partial support · <strong>✗</strong> = bad or no support</p><h3 id="notes-on-partial-i-o-support" tabindex="-1">Notes on partial I/O support <a class="header-anchor" href="#notes-on-partial-i-o-support" aria-label="Permalink to &quot;Notes on partial I/O support&quot;">​</a></h3><p>Both <code>aniso_varying_string</code> and StringiFor support I/O through defined I/O type-bound procedures (<code>read(formatted)</code>, <code>write(formatted)</code>, etc.). The <code>DT</code> edit descriptor (defined I/O) is fully supported in gfortran ≥ 7.1. For simpler portability, the <code>//&#39;&#39;</code> concatenation idiom converts a <code>string</code> to a <code>character</code> on the fly:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;(A)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, my_string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span></span></code></pre></div><h3 id="notes-on-slice-notation" tabindex="-1">Notes on slice notation <a class="header-anchor" href="#notes-on-slice-notation" aria-label="Permalink to &quot;Notes on slice notation&quot;">​</a></h3><p>Standard slice notation (<code>s(2:5)</code>) cannot be applied to a derived type. StringiFor provides the <code>slice</code> method and the <code>chars([first][, last])</code> method as equivalents:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! Standard character</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;(A)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! StringiFor equivalents</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;(A)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, my_string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">slice(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">first</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> last</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;(A)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, my_string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chars(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="stringifor-s-distinctive-features" tabindex="-1">StringiFor&#39;s Distinctive Features <a class="header-anchor" href="#stringifor-s-distinctive-features" aria-label="Permalink to &quot;StringiFor&#39;s Distinctive Features&quot;">​</a></h2><p>Beyond solving the same issues as <code>aniso_varying_string</code>, StringiFor adds:</p><ul><li><strong>Number casting</strong> — assign any PENF integer or real directly to a <code>string</code>; cast back with <code>to_number(kind=...)</code></li><li><strong>File I/O</strong> — <code>read_file</code>, <code>write_file</code>, <code>read_line</code> for common file-handling patterns</li><li><strong>Path manipulation</strong> — <code>basedir</code>, <code>basename</code>, <code>extension</code></li><li><strong>Case conversion</strong> — <code>camelcase</code>, <code>snakecase</code>, <code>startcase</code>, <code>capitalize</code>, <code>swapcase</code></li><li><strong>Encoding</strong> — Base64 <code>encode</code>/<code>decode</code> via BeFoR64</li><li><strong>Color output</strong> — ANSI terminal colorization via FACE</li><li><strong>Glob</strong> — file-system pattern matching</li><li><strong>Namespace safety</strong> — all functionality is accessible through the single <code>string</code> type; no global namespace pollution unless the overloaded intrinsic interfaces are explicitly imported</li></ul><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><p><a name="ref1"></a>[1] Clive Page, <em><a href="http://www.fortran.bcs.org/2015/suggestion_string_handling.pdf" target="_blank" rel="noreferrer">Improved String-handling in Fortran</a></em>, October 2015.</p><p>[2] Ian Harvey, <em><a href="http://www.megms.com.au/aniso_varying_string.htm" target="_blank" rel="noreferrer">aniso_varying_string</a></em>, 2016.</p>`,30)])])}const g=t(n,[["render",l]]);export{c as __pageData,g as default};
